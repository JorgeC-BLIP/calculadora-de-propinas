<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Propinas y Divisor de Cuentas</title>
    <!-- Carga de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuraci칩n de la fuente Inter y estilos b치sicos de Tailwind -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* Un fondo gris claro agradable */
            color: #1f2937;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .card {
            background-color: white;
            padding: 2.5rem;
            border-radius: 1.5rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transition: all 0.3s ease;
        }
        /* Custom styling for number of people control */
        .input-control {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .input-control input[type="number"] {
            -moz-appearance: textfield; /* Firefox */
        }
        .input-control input::-webkit-outer-spin-button,
        .input-control input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        .icon-btn {
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            line-height: 1;
        }
    </style>
</head>
<body class="p-4">

    <div class="w-full max-w-sm sm:max-w-xl">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-indigo-700">
                游눯 Divisor de Cuentas y Propinas
            </h1>
        </header>

        <main class="grid grid-cols-1 lg:grid-cols-2 gap-8 card">
            
            <!-- SECCI칍N DE ENTRADAS (INPUTS) -->
            <div class="space-y-6">
                <!-- 1. Monto de la Cuenta -->
                <div>
                    <label for="billAmount" class="block text-sm font-semibold text-gray-700 mb-2">Monto de la Cuenta ($)</label>
                    <input type="number" id="billAmount" value="50.00" min="0" step="0.01" placeholder="Ej: 50.00"
                        class="w-full p-3 border-2 border-indigo-200 rounded-xl focus:ring-indigo-500 focus:border-indigo-500 text-lg font-bold text-gray-800 transition duration-150">
                </div>

                <!-- 2. Porcentaje de Propina -->
                <div>
                    <label id="tipLabel" class="block text-sm font-semibold text-gray-700 mb-2 flex justify-between">
                        <span>Porcentaje de Propina:</span>
                        <span id="tipPercentageDisplay" class="font-extrabold text-indigo-600">15%</span>
                    </label>
                    <input type="range" id="tipPercentage" value="15" min="0" max="30" step="1"
                        class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-xl transition duration-150"
                        style="--tw-ring-color: #6366f1;"> <!-- Custom style for range track color (tailwind) -->
                </div>

                <!-- 3. N칰mero de Personas -->
                <div>
                    <label class="block text-sm font-semibold text-gray-700 mb-2">N칰mero de Personas</label>
                    <div class="input-control bg-indigo-50 rounded-xl p-2">
                        <button id="minusButton"
                            class="icon-btn bg-indigo-200 text-indigo-700 rounded-lg hover:bg-indigo-300 transition active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed">
                            -
                        </button>
                        <input type="number" id="numberOfPeople" value="2" min="1" readonly
                            class="text-center bg-transparent border-none focus:ring-0 text-2xl font-black w-20">
                        <button id="plusButton"
                            class="icon-btn bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition active:scale-95">
                            +
                        </button>
                    </div>
                </div>
            </div>

            <!-- SECCI칍N DE RESULTADOS -->
            <div class="bg-indigo-700 p-6 rounded-2xl flex flex-col justify-between shadow-xl">
                <h2 class="text-xl font-bold text-indigo-200 mb-4">Resultados</h2>
                <div class="space-y-4">
                    <!-- Propina Total -->
                    <div class="flex justify-between items-center py-2 border-b border-indigo-600">
                        <span class="text-indigo-200">Propina Total:</span>
                        <span id="totalTip" class="text-3xl font-extrabold text-teal-400">$0.00</span>
                    </div>

                    <!-- Cuenta Total -->
                    <div class="flex justify-between items-center py-2 border-b border-indigo-600">
                        <span class="text-indigo-200">Total a Pagar:</span>
                        <span id="totalBill" class="text-3xl font-extrabold text-white">$0.00</span>
                    </div>
                    
                    <!-- Monto por Persona (el m치s importante) -->
                    <div class="flex justify-between items-center pt-4">
                        <span class="text-indigo-200 text-lg font-semibold">Monto por Persona:</span>
                        <span id="amountPerPerson" class="text-4xl font-extrabold text-teal-400">$0.00</span>
                    </div>
                </div>

            </div>
        </main>
        
        <footer class="text-center mt-6 text-sm text-gray-500">
            <p>Calculadora interactiva sin necesidad de recargar la p치gina.</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Referencias a los elementos del DOM
            const billAmountInput = document.getElementById('billAmount');
            const tipPercentageInput = document.getElementById('tipPercentage');
            const tipPercentageDisplay = document.getElementById('tipPercentageDisplay');
            const numberOfPeopleInput = document.getElementById('numberOfPeople');
            const plusButton = document.getElementById('plusButton');
            const minusButton = document.getElementById('minusButton');
            const totalTipDisplay = document.getElementById('totalTip');
            const totalBillDisplay = document.getElementById('totalBill');
            const amountPerPersonDisplay = document.getElementById('amountPerPerson');

            /**
             * Formatea un n칰mero a un string de moneda USD.
             * @param {number} value - El n칰mero a formatear.
             * @returns {string} - El valor formateado (ej: $15.50).
             */
            const formatCurrency = (value) => {
                // Ensure value is a number and handle invalid inputs gracefully
                if (isNaN(value) || value === null) {
                    return '$0.00';
                }
                return value.toLocaleString('en-US', {
                    style: 'currency',
                    currency: 'USD',
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2,
                });
            };

            /**
             * Realiza todos los c치lculos y actualiza los resultados en el DOM.
             */
            const calculate = () => {
                const billAmount = parseFloat(billAmountInput.value) || 0;
                const tipPercentage = parseFloat(tipPercentageInput.value) || 0;
                const numberOfPeople = parseInt(numberOfPeopleInput.value) || 1;
                
                // Mostrar el porcentaje de propina actual
                tipPercentageDisplay.textContent = `${tipPercentage}%`;

                if (billAmount <= 0 || numberOfPeople < 1) {
                    // Si los inputs no son v치lidos, mostrar $0.00
                    totalTipDisplay.textContent = formatCurrency(0);
                    totalBillDisplay.textContent = formatCurrency(0);
                    amountPerPersonDisplay.textContent = formatCurrency(0);
                    minusButton.disabled = numberOfPeople <= 1;
                    return;
                }

                // 1. Calcular Propina
                const totalTip = (billAmount * tipPercentage) / 100;

                // 2. Calcular Cuenta Total
                const totalBill = billAmount + totalTip;

                // 3. Calcular Monto por Persona
                const amountPerPerson = totalBill / numberOfPeople;

                // 4. Actualizar el DOM
                totalTipDisplay.textContent = formatCurrency(totalTip);
                totalBillDisplay.textContent = formatCurrency(totalBill);
                amountPerPersonDisplay.textContent = formatCurrency(amountPerPerson);
                
                // Asegurarse de que el bot칩n de restar se deshabilite en 1
                minusButton.disabled = numberOfPeople <= 1;
            };

            // --- Control de N칰mero de Personas ---

            plusButton.addEventListener('click', () => {
                let currentPeople = parseInt(numberOfPeopleInput.value) || 1;
                numberOfPeopleInput.value = currentPeople + 1;
                calculate();
            });

            minusButton.addEventListener('click', () => {
                let currentPeople = parseInt(numberOfPeopleInput.value) || 1;
                if (currentPeople > 1) {
                    numberOfPeopleInput.value = currentPeople - 1;
                    calculate();
                }
            });

            // --- Event Listeners para Inputs ---

            // 'input' se dispara inmediatamente cuando el valor de un rango o un input de texto cambia
            billAmountInput.addEventListener('input', calculate);
            tipPercentageInput.addEventListener('input', calculate);

            // Inicializar la calculadora al cargar
            calculate();
        });
    </script>
</body>
</html>